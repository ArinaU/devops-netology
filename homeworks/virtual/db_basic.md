# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Типы сущностей, которые нужно будет хранить в БД:
* Электронные чеки в json виде: NoSQL (как раз документно-ориентированная NoSQL для хранения документов в json-формате)
* Склады и автомобильные дороги для логистической компании: возможно графовые (можно представить склады как вершины, а дороги как ребра)
* Генеалогические деревья: иерархические (генеалогическое дерево и есть иерархия)
* Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации: key-value, где key - какой-то id доступа, а value - кэш идентификаторов клиентов.
* Отношения клиент-покупка для интернет-магазина: реляционная бд, где отношение клиент-покупка как раз будет связь many-to-many (которую доводить до n-ной нормальной формы).

## Задача 2
* Данные записываются на все узлы с задержкой до часа (асинхронная запись): 
  availability и partition tolerance, где availability за счет того, что можно получить данные с нод, но они какое-то время не будут консистентными, partition tolerance - система поддерживает несколько нод.
* При сетевых сбоях, система может разделиться на 2 раздельных кластера: 
  availability и partition tolerance, partition tolerance - потому что возможно расщепление на несколько нод, availability - скорее всего ноды готовы принимать запросы.
* Система может не прислать корректный ответ или сбросить соединение: точно не availability, так как может не быть соединение, про partition tolerance неизвестно.

PACELC-теорема:
* 1-ый кейс: PA-EC - Available, with bet on consistency
* 2-ой кейс: PA-EL - наверное при сбоях есть определенное latency
* 3-ий кейс: не C (может не прислать корректный ответ) и не A (может сбросить соединение), про PT неизвестно. 

## Задача 3
Если считать SQL БД ACID-системами, а NoSQL скорее BASE-системами, то скорее всего системой, в которой могут сочетаться принципы BASE и ACID, можно считать гибридную систему. Например, Postgres, куда можно добавлять данные в json/jsonb формате.


## Задача 4

Если система так заточена на время, то pub/sub системы не подходят для этого, потому что они скорее Fire and Forget и не предназначены для четкой доставки данных к определенному времени. В таких системах существует риск снижения производительности из-за того, что процесс застрял в длительном взаимодействии по обмену данными, из-за этого возникновение bottlenecks, для восстановления чего после них может просто отбросить сообщения в доставке и отправлять новые или дублировать их.
Такая система может вероятно просто не успеть доставить сообщение, у которого уже истечен таймаут.

